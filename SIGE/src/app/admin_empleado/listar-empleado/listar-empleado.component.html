<div class="container mx-auto px-4 py-6 max-w-6xl">
    <!-- Encabezado -->
    <div class="mb-6">
        <h2 class="text-2xl font-semibold text-gray-800">Listado de Empleados</h2>
        <p class="text-gray-600">Gestione y filtre la lista de empleados del sistema</p>
    </div>

    <!-- Tarjeta principal -->
    <div class="bg-white rounded-lg shadow-md overflow-hidden border border-gray-200">
        <!-- Encabezado tarjeta -->
        <div class="bg-indigo-600 px-6 py-4">
            <h3 class="text-lg font-medium text-white">Filtros de búsqueda</h3>
        </div>

        <!-- Contenido -->
        <div class="p-6">
            <!-- Filtros básicos -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <!-- Departamento -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Departamento</label>
                    <select class="w-full px-3 py-2 border rounded-md" [(ngModel)]="filtros.departamento">
                        <option value="">Todos los departamentos</option>
                        <option *ngFor="let depto of catalogos.departamentos" [value]="depto.nomDepartamento">
                            {{depto.nomDepartamento}}
                        </option>
                    </select>
                </div>

                <!-- Puesto -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Puesto</label>
                    <select class="w-full px-3 py-2 border rounded-md" [(ngModel)]="filtros.puesto">
                        <option value="">Todos los puestos</option>
                        <option *ngFor="let puesto of catalogos.puestos" [value]="puesto.nomPuesto">
                            {{puesto.nomPuesto}}
                        </option>
                    </select>
                </div>

                <!-- Ciudad -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ciudad</label>
                    <select class="w-full px-3 py-2 border rounded-md" [(ngModel)]="filtros.ciudad">
                        <option value="">Todas las ciudades</option>
                        <option *ngFor="let ciudad of catalogos.ciudades" [value]="ciudad.nomCiudad">
                            {{ciudad.nomCiudad}}
                        </option>
                    </select>
                </div>
            </div>

            <!-- Botón para mostrar/ocultar filtros avanzados -->
            <button 
                (click)="mostrarFiltrosAvanzados = !mostrarFiltrosAvanzados"
                class="mb-6 text-indigo-600 hover:text-indigo-800 flex items-center">
                <span class="mr-2">{{mostrarFiltrosAvanzados ? 'Ocultar filtros avanzados' : 'Mostrar filtros avanzados'}}</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" [class.transform]="mostrarFiltrosAvanzados" [class.rotate-180]="mostrarFiltrosAvanzados" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
            </button>

            <!-- Filtros avanzados -->
            <div *ngIf="mostrarFiltrosAvanzados" class="mb-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Sexo -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Sexo</label>
                        <select class="w-full px-3 py-2 border rounded-md" [(ngModel)]="filtros.sexo">
                            <option value="">Todos</option>
                            <option *ngFor="let sexo of catalogos.sexos" [value]="sexo.sexo">{{sexo.sexo}}</option>
                        </select>
                    </div>

                    <!-- Rol -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Rol</label>
                        <select class="w-full px-3 py-2 border rounded-md" [(ngModel)]="filtros.rol">
                            <option value="">Todos los roles</option>
                            <option *ngFor="let rol of catalogos.roles" [value]="rol.rol">{{rol.rol}}</option>
                        </select>
                    </div>

                    <!-- Fecha de nacimiento -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Fecha de nacimiento</label>
                        <input type="date" class="w-full px-3 py-2 border rounded-md" [(ngModel)]="filtros.fechaNacimiento">
                    </div>

                    <!-- Fecha de alta -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Fecha de alta</label>
                        <input type="date" class="w-full px-3 py-2 border rounded-md" [(ngModel)]="filtros.fechaAlta">
                    </div>

                    <!-- Nombre -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nombre</label>
                        <input type="text" class="w-full px-3 py-2 border rounded-md" [(ngModel)]="filtros.nombre" placeholder="Nombre">
                    </div>

                    <!-- Apellido Paterno -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Apellido Paterno</label>
                        <input type="text" class="w-full px-3 py-2 border rounded-md" [(ngModel)]="filtros.apellidoP" placeholder="Apellido paterno">
                    </div>

                    <!-- Apellido Materno -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Apellido Materno</label>
                        <input type="text" class="w-full px-3 py-2 border rounded-md" [(ngModel)]="filtros.apellidoM" placeholder="Apellido materno">
                    </div>
                </div>
            </div>

            <!-- Botones de acción para filtros -->
            <div class="flex justify-end gap-3 mb-6">
                <button 
                    class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300"
                    (click)="limpiarFiltros()">
                    Limpiar filtros
                </button>
                <button 
                    class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"
                    (click)="aplicarFiltros()">
                    Aplicar filtros
                </button>
            </div>

<!-- Tabla de resultados -->
<div class="overflow-x-auto">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Foto</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Clave</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nombre completo</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Departamento</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Puesto</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Estado</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            <tr *ngFor="let empleado of empleados" class="hover:bg-gray-50">
                <!-- Columna de la foto -->
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="w-10 h-10 rounded-full overflow-hidden bg-gray-200 border-2 border-gray-300">
                        <img 
                            *ngIf="empleado.fotoEmpleado" 
                            [src]="empleado.fotoEmpleado" 
                            alt="Foto de perfil" 
                            class="w-full h-full object-cover">
                        <div 
                            *ngIf="!empleado.fotoEmpleado" 
                            class="w-full h-full flex items-center justify-center text-gray-500">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                            </svg>
                        </div>
                    </div>
                </td>
                <!-- Resto de las columnas -->
                <td class="px-6 py-4 whitespace-nowrap">{{empleado.claveEmpleado}}</td>
                <td class="px-6 py-4">{{empleado.nombreCompleto}}</td>
                <td class="px-6 py-4">{{empleado.departamento}}</td>
                <td class="px-6 py-4">{{empleado.puesto}}</td>
                <td class="px-6 py-4">
                    <span [ngClass]="empleado.activo ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'"
                          class="px-2 py-1 text-xs rounded-full">
                        {{empleado.activo ? 'Activo' : 'Inactivo'}}
                    </span>
                </td>
                <td class="px-6 py-4">
                    <div class="flex space-x-2">
                        <button *ngIf="empleado.activo"
                                (click)="mostrarConfirmacionEliminar(empleado)"
                                class="text-red-600 hover:text-red-900">
                            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        </button>
                        <button *ngIf="!empleado.activo"
                                (click)="mostrarConfirmacionReactivar(empleado)"
                                class="text-green-600 hover:text-green-900">
                            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </button>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>

            <!-- Paginación -->
            <div class="mt-4 flex justify-between items-center">
                <div class="text-sm text-gray-700">
                    Mostrando <span class="font-medium">{{(paginacion.paginaActual - 1) * paginacion.itemsPorPagina + 1}}</span> a 
                    <span class="font-medium">{{Math.min(paginacion.paginaActual * paginacion.itemsPorPagina, paginacion.totalEmpleados)}}</span> de 
                    <span class="font-medium">{{paginacion.totalEmpleados}}</span> resultados
                </div>
                <div class="flex gap-2">
                    <button 
                        (click)="cambiarPagina(paginacion.paginaActual - 1)"
                        [disabled]="paginacion.paginaActual === 1"
                        class="px-3 py-1 border rounded-md hover:bg-gray-100 disabled:opacity-50">
                        Anterior
                    </button>
                    <button 
                        (click)="cambiarPagina(paginacion.paginaActual + 1)"
                        [disabled]="(paginacion.paginaActual * paginacion.itemsPorPagina) >= paginacion.totalEmpleados"
                        class="px-3 py-1 border rounded-md hover:bg-gray-100 disabled:opacity-50">
                        Siguiente
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal de confirmación para eliminar -->
<div *ngIf="mostrarDialogoEliminar" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Confirmar eliminación</h3>
        <p class="text-gray-600 mb-6">
            ¿Está seguro que desea eliminar al empleado {{empleadoAccion?.nombreCompleto}}? Esta acción no se puede deshacer.
        </p>
        <div class="flex justify-end gap-3">
            <button 
                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300"
                (click)="cerrarDialogos()">
                Cancelar
            </button>
            <button 
                class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"
                (click)="eliminarEmpleado(empleadoAccion.claveEmpleado)">
                Eliminar
            </button>
        </div>
    </div>
</div>

<!-- Modal de confirmación para reactivar -->
<div *ngIf="mostrarDialogoReactivar" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Confirmar reactivación</h3>
        <p class="text-gray-600 mb-6">
            ¿Está seguro que desea reactivar al empleado {{empleadoAccion?.nombreCompleto}}?
        </p>
        <div class="flex justify-end gap-3">
            <button 
                class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300"
                (click)="cerrarDialogos()">
                Cancelar
            </button>
            <button 
                class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"
                (click)="reactivarEmpleado(empleadoAccion.claveEmpleado)">
                Reactivar
            </button>
        </div>
    </div>
</div>